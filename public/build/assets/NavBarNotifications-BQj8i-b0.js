import{a2 as A,a3 as I,O as S,o as l,c as n,w as s,d as t,z as T,b as c,V as h,e as $,ab as E,ac as R,ad as D,k as v,t as d,ae as x,f as F,h as b,F as k,r as L,C as f,i as y,a as p,af as P,ag as j,ah as V,ai as q,Q as M,B as O,M as C,j as Q,N,aj as U,l as G,ak as B}from"./app-mkR68Ml8.js";import{C as H}from"./vue3-perfect-scrollbar-C6RTHoMn.js";/* empty css                                                      */import{V as J}from"./VBadge-BMRP4p2B.js";const K={class:"d-flex align-start gap-3"},W={key:0},X={class:"text-body-2 mb-2",style:{"letter-spacing":"0.4px !important","line-height":"18px"}},Y={class:"text-sm text-disabled mb-0",style:{"letter-spacing":"0.4px !important","line-height":"18px"}},Z={class:"d-flex flex-column align-end"},ee={__name:"Notifications",props:{notifications:{type:Array,required:!0},badgeProps:{type:Object,required:!1,default:void 0},location:{type:null,required:!1,default:"bottom end"}},setup(g){const u=A(),r=I(()=>u.props.user.notifications),m=g,_=e=>{B.put("/dashboard/notifications/"+e,{},{preserveState:!1,onSuccess:()=>{}})},o=()=>{let e=null;u.props.user.type=="Admin"?e="/dashboard/admin/notifications":u.props.user.type=="Instructor"?e="/dashboard/notifications":e="/dashboard",B.get(e)};return(e,i)=>{const w=S("IconBtn");return l(),n(w,{id:"notification-btn"},{default:s(()=>[t(J,T(m.badgeProps,{"model-value":c(r).some(a=>!a.read),color:"#3269D3",dot:"","offset-x":"-3","offset-y":"-3",class:"bounce"}),{default:s(()=>[t(h,{icon:"tabler-bell-filled",size:"32",color:"#9A9A9A"})]),_:1},16,["model-value"]),t($,{activator:"parent",width:"380px",location:m.location,offset:"12px","close-on-content-click":!1},{default:s(()=>[t(E,{class:"d-flex flex-column"},{default:s(()=>[t(R,{class:"notification-section"},{default:s(()=>[t(D,{class:"text-h6"},{default:s(()=>[v(d(e.$t("Notifications")),1)]),_:1})]),_:1}),t(x),t(c(H),{options:{wheelPropagation:!1},style:{"max-block-size":"23.75rem"}},{default:s(()=>[t(F,{class:"notification-list rounded-0 py-0"},{default:s(()=>[(l(!0),b(k,null,L(c(r),(a,z)=>(l(),b(k,{key:a.title},[z>0?(l(),n(x,{key:0})):f("",!0),t(y,{link:"",lines:"one","min-height":"66px",class:"list-item-hover-class"},{default:s(()=>[p("div",K,[t(P,{color:a.color&&!a.img?a.color:void 0,variant:a.img?void 0:"tonal"},{default:s(()=>[a.text?(l(),b("span",W,d(("avatarText"in e?e.avatarText:c(j))(a.text)),1)):f("",!0),a.img?(l(),n(V,{key:1,src:a.img},null,8,["src"])):(l(),n(V,{key:2,src:c(q)},null,8,["src"])),a.icon?(l(),n(h,{key:3,icon:a.icon},null,8,["icon"])):f("",!0)]),_:2},1032,["color","variant"]),p("div",null,[p("p",X,d(a.data.message),1),p("p",Y,d(a.create_at),1)]),t(M),p("div",Z,[a.read?f("",!0):(l(),n(h,{key:0,size:"10",icon:"tabler-circle-filled",color:a.read?"#a8aaae":"primary",class:O([`${a.read?"visible-in-hover":""}`,"mb-2"])},null,8,["color","class"])),a.read?f("",!0):(l(),n(h,{key:1,size:"20",icon:"tabler-x",class:"visible-in-hover",onClick:ae=>_(a.id)},null,8,["onClick"]))])])]),_:2},1024)],64))),128)),C(t(y,{class:"text-center text-medium-emphasis",style:{"block-size":"56px"}},{default:s(()=>[t(Q,null,{default:s(()=>[v(d(e.$t("No Notification Found!")),1)]),_:1})]),_:1},512),[[N,!c(r).length]])]),_:1})]),_:1}),t(x),C(t(U,{class:"pa-4"},{default:s(()=>[t(G,{block:"",size:"small",onClick:i[0]||(i[0]=a=>o())},{default:s(()=>[v(d(e.$t("View All Notifications")),1)]),_:1})]),_:1},512),[[N,c(r).length]])]),_:1})]),_:1},8,["location"])]),_:1})}}},ie={__name:"NavBarNotifications",setup(g){const u=o=>{notifications.value.forEach((e,i)=>{o===e.id&&notifications.value.splice(i,1)})},r=o=>{notifications.value.forEach(e=>{o.forEach(i=>{i===e.id&&(e.isSeen=!0)})})},m=o=>{notifications.value.forEach(e=>{o.forEach(i=>{i===e.id&&(e.isSeen=!1)})})},_=o=>{o.isSeen||r([o.id])};return(o,e)=>{const i=ee;return l(),n(i,{notifications:o.notifications,onRemove:u,onRead:r,onUnread:m,"onClick:notification":_},null,8,["notifications"])}}};export{ie as default};
